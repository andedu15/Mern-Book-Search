{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\anded\\\\OneDrive\\\\Escritorio\\\\Bootcamp\\\\Challenges\\\\Book-Search-Engine\\\\client\\\\src\\\\pages\\\\SavedBooks.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { Jumbotron, Container, CardColumns, Card, Button } from 'react-bootstrap';\nimport Auth from '../utils/auth';\nimport { removeBookId } from '../utils/localStorage';\nimport { useQuery } from '@apollo/client';\nimport { GET_ME } from '../utils/queries';\nimport { useMutation } from '@apollo/client';\nimport { REMOVE_BOOK } from '../utils/mutations';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst SavedBooks = () => {\n  _s();\n\n  const {\n    loading,\n    data\n  } = useQuery(GET_ME);\n  const [deleteBook, {\n    error\n  }] = useMutation(REMOVE_BOOK);\n  const userData = (data === null || data === void 0 ? void 0 : data.me) || {};\n\n  const handleDeleteBook = async bookId => {\n    const token = Auth.loggedIn() ? Auth.getToken() : null;\n\n    if (!token) {\n      return false;\n    }\n\n    try {\n      await deleteBook({\n        variables: {\n          bookId\n        }\n      }); // upon success, remove book's id from localStorage\n\n      removeBookId(bookId);\n      document.getElementById(bookId).remove();\n      let counterEl = document.getElementById('counter');\n      let currentNum = parseInt(counterEl.innerText.split(' ')[1]);\n\n      if (currentNum === 1) {\n        return counterEl.innerText = 'You have no saved books!';\n      } else {\n        counterEl.innerText = `Viewing ${currentNum - 1} saved ${currentNum === 1 ? 'book' : 'books'}`;\n      }\n    } catch (err) {\n      console.error(err);\n    }\n  }; // if data isn't here yet, say so\n\n\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"LOADING...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 12\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Jumbotron, {\n      fluid: true,\n      className: \"text-light bg-dark\",\n      children: /*#__PURE__*/_jsxDEV(Container, {\n        children: /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Viewing saved books!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        id: \"counter\",\n        children: userData.savedBooks.length ? `Viewing ${userData.savedBooks.length} saved ${userData.savedBooks.length === 1 ? 'book' : 'books'}:` : 'You have no saved books!'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(CardColumns, {\n        children: userData.savedBooks.map((book, key) => {\n          return /*#__PURE__*/_jsxDEV(Card, {\n            id: book.bookId,\n            border: \"dark\",\n            children: [book.image ? /*#__PURE__*/_jsxDEV(Card.Img, {\n              src: book.image,\n              alt: `The cover for ${book.title}`,\n              variant: \"top\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 80,\n              columnNumber: 19\n            }, this) : null, /*#__PURE__*/_jsxDEV(Card.Body, {\n              children: [/*#__PURE__*/_jsxDEV(Card.Title, {\n                children: book.title\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 87,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"small\",\n                children: [\"Authors: \", book.authors]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 88,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Card.Text, {\n                children: book.description\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 89,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n                target: \"_blank\",\n                rel: \"noreferrer noopener\",\n                sid: \"link\",\n                href: book.link,\n                children: book.link == null ? 'No link available' : 'Link to google'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 90,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                className: \"btn-block btn-danger\",\n                onClick: () => handleDeleteBook(book.bookId),\n                children: \"Delete this Book!\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 98,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 86,\n              columnNumber: 17\n            }, this)]\n          }, key, true, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 15\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"There was an issue viewing your books\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 19\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(SavedBooks, \"HMY+AQwqhqiezWoWyxnMcHGm6Q8=\", false, function () {\n  return [useQuery, useMutation];\n});\n\n_c = SavedBooks;\nexport default SavedBooks;\n\nvar _c;\n\n$RefreshReg$(_c, \"SavedBooks\");","map":{"version":3,"names":["React","Jumbotron","Container","CardColumns","Card","Button","Auth","removeBookId","useQuery","GET_ME","useMutation","REMOVE_BOOK","SavedBooks","loading","data","deleteBook","error","userData","me","handleDeleteBook","bookId","token","loggedIn","getToken","variables","document","getElementById","remove","counterEl","currentNum","parseInt","innerText","split","err","console","savedBooks","length","map","book","key","image","title","authors","description","link"],"sources":["C:/Users/anded/OneDrive/Escritorio/Bootcamp/Challenges/Book-Search-Engine/client/src/pages/SavedBooks.js"],"sourcesContent":["import React from 'react';\nimport {\n  Jumbotron,\n  Container,\n  CardColumns,\n  Card,\n  Button,\n} from 'react-bootstrap';\n\nimport Auth from '../utils/auth';\nimport { removeBookId } from '../utils/localStorage';\n\nimport { useQuery } from '@apollo/client';\nimport { GET_ME } from '../utils/queries';\n\nimport { useMutation } from '@apollo/client';\nimport { REMOVE_BOOK } from '../utils/mutations';\n\nconst SavedBooks = () => {\n  const { loading, data } = useQuery(GET_ME);\n\n  const [deleteBook, { error }] = useMutation(REMOVE_BOOK);\n\n  const userData = data?.me || {};\n\n  const handleDeleteBook = async (bookId) => {\n    const token = Auth.loggedIn() ? Auth.getToken() : null;\n\n    if (!token) {\n      return false;\n    }\n\n    try {\n      await deleteBook({\n        variables: { bookId },\n      });\n\n      // upon success, remove book's id from localStorage\n      removeBookId(bookId);\n      document.getElementById(bookId).remove();\n      let counterEl = document.getElementById('counter');\n      let currentNum = parseInt(counterEl.innerText.split(' ')[1]);\n      if (currentNum === 1) {\n        return (counterEl.innerText = 'You have no saved books!');\n      } else {\n        counterEl.innerText = `Viewing ${currentNum - 1} saved ${\n          currentNum === 1 ? 'book' : 'books'\n        }`;\n      }\n    } catch (err) {\n      console.error(err);\n    }\n  };\n\n  // if data isn't here yet, say so\n  if (loading) {\n    return <h2>LOADING...</h2>;\n  }\n\n  return (\n    <>\n      <Jumbotron fluid className=\"text-light bg-dark\">\n        <Container>\n          <h1>Viewing saved books!</h1>\n        </Container>\n      </Jumbotron>\n      <Container>\n        <h2 id=\"counter\">\n          {userData.savedBooks.length\n            ? `Viewing ${userData.savedBooks.length} saved ${\n                userData.savedBooks.length === 1 ? 'book' : 'books'\n              }:`\n            : 'You have no saved books!'}\n        </h2>\n        <CardColumns>\n          {userData.savedBooks.map((book, key) => {\n            return (\n              <Card key={key} id={book.bookId} border=\"dark\">\n                {book.image ? (\n                  <Card.Img\n                    src={book.image}\n                    alt={`The cover for ${book.title}`}\n                    variant=\"top\"\n                  />\n                ) : null}\n                <Card.Body>\n                  <Card.Title>{book.title}</Card.Title>\n                  <p className=\"small\">Authors: {book.authors}</p>\n                  <Card.Text>{book.description}</Card.Text>\n                  <a\n                    target=\"_blank\"\n                    rel=\"noreferrer noopener\"\n                    sid=\"link\"\n                    href={book.link}\n                  >\n                    {book.link == null ? 'No link available' : 'Link to google'}\n                  </a>\n                  <Button\n                    className=\"btn-block btn-danger\"\n                    onClick={() => handleDeleteBook(book.bookId)}\n                  >\n                    Delete this Book!\n                  </Button>\n                </Card.Body>\n              </Card>\n            );\n          })}\n        </CardColumns>\n        {error && <div>There was an issue viewing your books</div>}\n      </Container>\n    </>\n  );\n};\n\nexport default SavedBooks;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}